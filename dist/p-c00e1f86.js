import{h as t}from"./p-1e3a44cd.js";import{u as n}from"./p-f6cc1057.js";const e=t=>null!=t,o=t=>e(t)&&"object"==typeof t&&!(t=>e(t)&&Array.isArray(t))(t);function a(t,n,e,o,a){u(t.feature.split(t.separator),window);const i=function t(n,e){const o=n.shift();return n.length>0?t(n,e[o]):e[o]}(t.feature.split(t.separator),window);u(t.feature.split(t.separator),window,e?r(i,n):c(i,n,o,a))}function u(t,n,e){const o=t.shift();n[o]=n[o]||{},t.length>0?u(t,n[o],e):n[o]=e||n[o]}function r(t,n){const e=Object.assign({},t);return Object.keys(n).forEach(a=>{e[a]=a in t?o(t[a])&&o(n[a])?r(t[a],n[a]):t[a]:n[a]}),e}function c(t,n,e,a){const u=Object.assign({},t);return Object.keys(n).forEach(r=>{u[r]=!(r in t)||!o(n[r])||e&&n[r]===a?n[r]:c(t[r],n[r],e,a)}),u}function i(t,n=window,e="."){return(Array.isArray(t)?t:t.split(e)).reduce((t,n)=>t&&t[n],n)}function s(t,n,e,u,s){((t,n,e,o)=>{const u=t.state?function t(n,e){const o=n.shift();return n.length>0?{[o]:t(n,e)}:{[o]:e}}(t.state.split(t.separator),n):n;switch(t.type){case"memory":a(t,u,e,o,n);break;case"local":const i=JSON.parse(localStorage.getItem(t.feature))||{};localStorage.setItem(t.feature,JSON.stringify(e?r(i,u):c(i,u,o,n)));break;case"session":let s=JSON.parse(sessionStorage.getItem(t.feature))||{};sessionStorage.setItem(t.feature,JSON.stringify(e?r(s,u):c(s,u,o,n)));break;default:a(t,u,e,o,n)}})(n,e,u,s);const l=JSON.parse(localStorage.getItem("uniStoreDebug"));l&&l[n.type]&&l[n.type].includes("set")&&function(t){const n=(({type:t,feature:n,separator:e,state:o})=>{switch(t){case"memory":return i(n+e+o);case"local":const t=JSON.parse(localStorage.getItem(n));return o?i(o,t,e):t;case"session":const a=JSON.parse(sessionStorage.getItem(n));return o?i(o,a,e):a;default:return i(n+e+o)}})(t);console.log("%cSTORE SET:","color: darkred; font-weight: bold",Object.assign(Object.assign({},t),{value:n,$event:void 0}))}(n),document.body.dispatchEvent(new CustomEvent(t,{detail:Object.assign(Object.assign({},n),{value:e})})),o(e)&&function t(n,e,a){for(let[u,r]of Object.entries(a)){const a=n+e.separator+u;o(r)&&t(a,e,r),document.body.dispatchEvent(new CustomEvent(a,{detail:Object.assign(Object.assign({},e),{value:r})}))}}(t,n,e)}function l({type:t,menuState:e,languages:o}){n("uni-lang-menu","innerText");const a={type:t,feature:"uni.store",separator:".",state:e};return s(function(t){return t.feature+(t.state?t.separator+t.state:"")}(a),a,null,!1,!1),o?async function(t,n,e){return await async function(t,n,e){const o=await fetch(t,e);return await o[n]()}(t,n,e)}(o,"json",{}):new Promise(null)}const f=function({type:n,mini:e,rounded:o,routing:a,route:u,activeState:r,list:c,lang:i}){return t("div",{class:"mdc-menu-surface--anchor uni-lang-menu"},t("uni-store",{active:!0,init:!0,type:n,state:r,value:i}),t("uni-button-mat",null,t("uni-button-icon-mat",null,t("uni-store",{active:!0,type:n,state:r+".flag",target:"uni-flag",prop:"name"},t("uni-store",{active:!0,type:n,state:r+".flagSrc",target:"uni-flag",prop:"src"},t("uni-flag",{rounded:o})))),e?"":t("uni-button-label-mat",null,t("uni-store",{active:!0,type:n,state:r+".name",target:"uni-text",prop:"content"},t("uni-text",{class:"uni-lang-menu-label"}))),t("uni-button-icon-mat",null,t("uni-icon-arrow-drop-down-mat",null))),t("uni-menu-surface-mat",null,t("uni-list-mat",null,c.map(e=>t("uni-store",{active:!a,type:n,event:"click",state:r,value:e},t("uni-route-link",{params:a?`${u}=${e.lang}`:""},t("uni-list-item-mat",null,t("uni-flag",{src:e.flagSrc,name:e.flag,rounded:o}),t("uni-text",{content:e.name}))),t("uni-route",{params:a?`${u}=${e.lang}`:""},t("uni-store",{type:n,state:r,value:e})))))))};export{f as U,l as u}