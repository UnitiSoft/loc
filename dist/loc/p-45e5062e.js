import"./p-1f59172b.js";import{i as t,a as e,b as n}from"./p-3427740d.js";function o(e){return"true"===e||""===e||"false"!==e&&(isNaN(parseFloat(e))?"null"===e?null:t(e)?JSON.parse(e):e:parseFloat(e))}const a=({type:t,feature:e,separator:n,state:o})=>{switch(t){case"memory":return l(e+n+o);case"local":const t=JSON.parse(localStorage.getItem(e));return o?l(o,t,n):t;case"session":const a=JSON.parse(sessionStorage.getItem(e));return o?l(o,a,n):a;default:return l(e+n+o)}};function r(t,e,n,o,a){s(t.feature.split(t.separator),window);const r=function t(e,n){const o=e.shift();return e.length>0?t(e,n[o]):n[o]}(t.feature.split(t.separator),window);s(t.feature.split(t.separator),window,n?c(r,e):u(r,e,o,a))}function s(t,e,n){const o=t.shift();e[o]=e[o]||{},t.length>0?s(t,e[o],n):e[o]=n||e[o]}function c(t,e){const o=Object.assign({},t);return Object.keys(e).forEach(a=>{o[a]=a in t?n(t[a])&&n(e[a])?c(t[a],e[a]):t[a]:e[a]}),o}function u(t,e,o,a){const r=Object.assign({},t);return Object.keys(e).forEach(s=>{r[s]=!(s in t)||!n(e[s])||o&&e[s]===a?e[s]:u(t[s],e[s],o,a)}),r}function l(t,e=window,n="."){return(Array.isArray(t)?t:t.split(n)).reduce((t,e)=>t&&t[e],e)}function i(t,e,n){return e?n?t.querySelectorAll(e):[t.querySelector(e)]:null}const f={toggle:t=>{const{feature:e,separator:n,state:o,type:r}=t;return!a({type:r,feature:e,separator:n,state:o})},getLink:t=>t.$event.target.pathname||function(t){let e="";return[].some.call(t,t=>(e=t.pathname||"",!!t.pathname)),e}(t.$event.path)};function S({type:t,feature:n,separator:r,state:s,equal:c,noEqual:u,value:l,prop:i,elements:f,el:S,$event:b}){if(i){const d=a({type:t,feature:n,separator:r,state:s}),g=e(c)&&d===o(c)||e(u)&&d!==o(u),w=e(l)?e(c)||e(u)?g?O(l):void 0:O(l):e(c)||e(u)?g:d,j=JSON.parse(localStorage.getItem("uniStoreDebug"));j&&j[t]&&j[t].includes("listen")&&console.log("%cSTORE LISTEN:","color: darkorange; font-weight: bold",{type:t,feature:n,state:s,prop:i,val:w,element:S,$event:b}),p(f,i,w)}}function O(e){return t(e)?JSON.parse(e):e}function p(t,e,n){[].forEach.call(t,t=>{t[e]=n})}function b(t){return t.feature+(t.state?t.separator+t.state:"")}function d(t,e,o,s,l){((t,e,n,o)=>{const a=t.state?function t(e,n){const o=e.shift();return e.length>0?{[o]:t(e,n)}:{[o]:n}}(t.state.split(t.separator),e):e;switch(t.type){case"memory":r(t,a,n,o,e);break;case"local":const s=JSON.parse(localStorage.getItem(t.feature))||{};localStorage.setItem(t.feature,JSON.stringify(n?c(s,a):u(s,a,o,e)));break;case"session":let l=JSON.parse(sessionStorage.getItem(t.feature))||{};sessionStorage.setItem(t.feature,JSON.stringify(n?c(l,a):u(l,a,o,e)));break;default:r(t,a,n,o,e)}})(e,o,s,l);const i=JSON.parse(localStorage.getItem("uniStoreDebug"));i&&i[e.type]&&i[e.type].includes("set")&&function(t){const e=a(t);console.log("%cSTORE SET:","color: darkred; font-weight: bold",Object.assign(Object.assign({},t),{value:e,$event:void 0}))}(e),document.body.dispatchEvent(new CustomEvent(t,{detail:Object.assign(Object.assign({},e),{value:o})})),n(o)&&function t(e,o,a){for(let[r,s]of Object.entries(a)){const a=e+o.separator+r;n(s)&&t(a,o,s),document.body.dispatchEvent(new CustomEvent(a,{detail:Object.assign(Object.assign({},o),{value:s})}))}}(t,e,o)}export{f as U,S as a,b,d as c,p as d,o as g,i as u}