import{r as t,g as n}from"./p-1f59172b.js";import"./p-27a17b51.js";import{a as s}from"./p-3427740d.js";import{u as i}from"./p-47e99d0e.js";function o(t,n){t.forEach(t=>{t.hidden=n})}function c(t,n,i,o){t.forEach(t=>{if(t.hasChildNodes())1===t.nodeType&&e(t,n,i,o),c(t.childNodes,n,i,o);else switch(t.nodeType){case 1:e(t,n,i,o);break;case 3:!function(t,n,i,o){const c=r(t).trim();let e;c.length&&(c!==t.currentValue?(e=c,t.originalContent=r(t)):t.originalContent&&(t.lastKey=null,e=t.originalContent.trim())),e&&function(t,n,i,o,c){if(t.lastKey!==i){const e=a(n,i,o,c);e!==i&&(t.lastKey=i),t.originalContent||(t.originalContent=r(t)),t.currentValue=s(e)?e:t.originalContent||i,function(t,n){s(t.textContent)?t.textContent=n:t.data=n}(t,t.originalContent.replace(i,t.currentValue))}}(t,n,e,i,o)}(t,n,i,o)}})}function e(t,n,i,o){const c=t.attributes;if(c&&c.length>0)for(let e=0;e<c.length;++e){s(t.originalAttributes)||(t.originalAttributes=new Map);const r=c[e].name,u=t.originalAttributes.get(r)||c[e].value;""!==u.trim()&&(t.originalAttributes.set(r,u),c[e].value=a(n,u,i,o))}}function r(t){return t.textContent||t.data}function a(t,n,s,i){return function t(n,s,i,o){return s.includes(i)&&s.includes(o)?function(n,s,i,o){return function t(n,s,i,o){const c=n.match(/([{]{2}(?!.+[{]{2}.+)(.+)[}]{2})/g);return c&&c.length&&(o.push(c[0].replace(s,"").replace(i,"")),t(n.replace(c[0],""),s,i,o)),o}(s,i,o,[]).forEach(c=>{const e=i+c+o,r=t(n,u(n,c)||c,i,o);s=s.replace(e,r!==c?r:e)}),s}(n,s,i,o):s}(t,u(t,n)||n,s,i)}function u(t,n){var s;return t&&(null===(s=t[n.trim()])||void 0===s?void 0:s.toString())}const f=class{constructor(n){t(this,n),this.start="{{ ",this.end=" }}"}handleState(t,n){JSON.stringify(t)!==JSON.stringify(n)&&(c(this.el.childNodes,t,this.start,this.end),o(this.el.childNodes,!1))}connectedCallback(){const{el:t}=this;i(t,{strict:{el:t,packages:["loc"]}})}componentDidLoad(){this.state&&(c(this.el.childNodes,this.state,this.start,this.end),o(this.el.childNodes,!1))}get el(){return n(this)}static get watchers(){return{state:["handleState"]}}};export{f as uni_replace}